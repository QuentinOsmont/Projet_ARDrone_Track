<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Urbi SDK Remote: uobject.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath">
    <ul>
      <li><a class="el" href="dir_03c25b13d14c5db4475ec8bbd24b0f1f.html">source</a>      </li>
      <li><a class="el" href="dir_218aef791fc34308040010d988450d4d.html">sdk-remote</a>      </li>
      <li><a class="el" href="dir_8936cf83ad6d7e6892ca1b54c991a702.html">src</a>      </li>
      <li><a class="el" href="dir_ce7892fd3741598588e2efda9b4f60f6.html">libuobject</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>uobject.cc</h1>  </div>
</div>
<div class="contents">
<a href="uobject_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2005-2010, Gostai S.A.S.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This software is provided &quot;as is&quot; without warranty of any kind,</span>
<a name="l00005"></a>00005 <span class="comment"> * either expressed or implied, including but not limited to the</span>
<a name="l00006"></a>00006 <span class="comment"> * implied warranties of fitness for a particular purpose.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * See the LICENSE file for more information.</span>
<a name="l00009"></a>00009 <span class="comment"> */</span>
<a name="l00010"></a>00010 
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;boost/date_time/gregorian/gregorian.hpp&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;libport/containers.hh&gt;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;libport/debug.hh&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;libport/escape.hh&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;libport/foreach.hh&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;libport/lexical-cast.hh&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;libport/unistd.h&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;libport/debug.hh&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;libport/format.hh&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="compatibility_8hh.html">liburbi/compatibility.hh</a>&gt;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;<a class="code" href="uexternal_8hh.html">urbi/uexternal.hh</a>&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;<a class="code" href="umessage_8hh.html">urbi/umessage.hh</a>&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;<a class="code" href="uobject_8hh.html">urbi/uobject.hh</a>&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;<a class="code" href="ustarter_8hh.html">urbi/ustarter.hh</a>&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;<a class="code" href="usyncclient_8hh.html" title="Definition of the URBI interface class.">urbi/usyncclient.hh</a>&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;<a class="code" href="uvar_8hh.html">urbi/uvar.hh</a>&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;<a class="code" href="ucontext-factory_8hh.html">urbi/ucontext-factory.hh</a>&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;<a class="code" href="remote-ucontext-impl_8hh.html">libuobject/remote-ucontext-impl.hh</a>&gt;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <a class="code" href="uobject-common_8cc.html#a2732044fb4a85ef4edd80daf89b37efb">GD_CATEGORY</a>(LibUObject);
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">00043</a> <span class="preprocessor">#define REQUIRE(Cond, ...)                      \</span>
<a name="l00044"></a>00044 <span class="preprocessor">  do {                                          \</span>
<a name="l00045"></a>00045 <span class="preprocessor">    if (!(Cond))                                \</span>
<a name="l00046"></a>00046 <span class="preprocessor">    {                                           \</span>
<a name="l00047"></a>00047 <span class="preprocessor">      msg.client.printf(__VA_ARGS__);           \</span>
<a name="l00048"></a>00048 <span class="preprocessor">      return URBI_CONTINUE;                     \</span>
<a name="l00049"></a>00049 <span class="preprocessor">    }                                           \</span>
<a name="l00050"></a>00050 <span class="preprocessor">  } while (false)</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 <span class="keyword">namespace </span>urbi
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054   <a class="code" href="namespaceurbi.html#af949b0f3e9909be6b1f43cf89b975e15" title="Possible UObject running modes.">UObjectMode</a> <a class="code" href="namespaceurbi.html#a44f428f8845871134f4ec6b4dc8fa566">running_mode</a>()
<a name="l00055"></a>00055   {
<a name="l00056"></a>00056     <span class="keywordflow">return</span> MODE_REMOTE;
<a name="l00057"></a>00057   }
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   <span class="keyword">namespace </span>impl
<a name="l00060"></a>00060   {
<a name="l00061"></a>00061     <span class="keyword">namespace</span>
<a name="l00062"></a>00062     {
<a name="l00065"></a>00065       <span class="keyword">static</span>
<a name="l00066"></a>00066       <span class="keywordtype">void</span>
<a name="l00067"></a>00067       eval_call(UTable&amp; t, UList&amp; args)
<a name="l00068"></a>00068       {
<a name="l00069"></a>00069         <span class="keywordflow">if</span> (<a class="code" href="structurbi_1_1_u_table.html#a9746883305270c69811db8b6f7454d75" title="The list call backs.">UTable::callbacks_type</a>* cs = t.find0(args[1]))
<a name="l00070"></a>00070         {
<a name="l00071"></a>00071           args.setOffset(2);
<a name="l00072"></a>00072           <span class="keywordflow">foreach</span> (UGenericCallback* c, *cs)
<a name="l00073"></a>00073             c-&gt;eval(args);
<a name="l00074"></a>00074           args.setOffset(0);
<a name="l00075"></a>00075         }
<a name="l00076"></a>00076       }
<a name="l00077"></a>00077     }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079     <span class="keyword">typedef</span> boost::unordered_map&lt;std::string, impl::UContextImpl*&gt;
<a name="l00080"></a><a class="code" href="namespaceurbi_1_1impl.html#a6d425a6d249a55644660b6917d665ca4">00080</a>             contexts_type;
<a name="l00081"></a><a class="code" href="namespaceurbi_1_1impl.html#a7479e33533f0af1dfeb48b75b6772947">00081</a>     <span class="keyword">static</span> <a class="code" href="namespaceurbi_1_1impl.html#a6d425a6d249a55644660b6917d665ca4">contexts_type</a> <a class="code" href="namespaceurbi_1_1impl.html#a7479e33533f0af1dfeb48b75b6772947">contexts</a>;
<a name="l00082"></a>00082 
<a name="l00083"></a>00083     <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html">impl::UContextImpl</a>*
<a name="l00084"></a>00084     <a class="code" href="namespaceurbi_1_1impl.html#ab351c4091762d3ed612c3034ba0189b7" title="Return a new remote context. Implemented in remote library only.">makeRemoteContext</a>(<span class="keyword">const</span> std::string&amp; host, <span class="keyword">const</span> std::string&amp; port)
<a name="l00085"></a>00085     {
<a name="l00086"></a>00086       <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html">impl::UContextImpl</a>* c = <span class="keyword">new</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">impl::RemoteUContextImpl</a>(
<a name="l00087"></a>00087         <span class="keyword">new</span> <a class="code" href="classurbi_1_1_u_sync_client.html" title="UClient linux implementation with support for synchronous extra functions.">USyncClient</a>(host, lexical_cast&lt;unsigned&gt;(port)));
<a name="l00088"></a>00088       <span class="keywordflow">return</span> c;
<a name="l00089"></a>00089     }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091     <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html">impl::UContextImpl</a>*
<a name="l00092"></a>00092     <a class="code" href="namespaceurbi_1_1impl.html#a04527bd3a44ae0536278491151381c4f" title="Return a remote context, only creates one context per host:port pair.">getRemoteContext</a>(<span class="keyword">const</span> std::string&amp; host, <span class="keyword">const</span> std::string&amp; port)
<a name="l00093"></a>00093     {
<a name="l00094"></a>00094       std::string key = host + <span class="charliteral">&#39;:&#39;</span> + port;
<a name="l00095"></a>00095       contexts_type::iterator i = <a class="code" href="namespaceurbi_1_1impl.html#a7479e33533f0af1dfeb48b75b6772947">contexts</a>.find(key);
<a name="l00096"></a>00096       <span class="keywordflow">if</span> (i != <a class="code" href="namespaceurbi_1_1impl.html#a7479e33533f0af1dfeb48b75b6772947">contexts</a>.end())
<a name="l00097"></a>00097         <span class="keywordflow">return</span> i-&gt;second;
<a name="l00098"></a>00098       <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html">impl::UContextImpl</a>* c = <span class="keyword">new</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">impl::RemoteUContextImpl</a>(
<a name="l00099"></a>00099         <span class="keyword">new</span> <a class="code" href="classurbi_1_1_u_sync_client.html" title="UClient linux implementation with support for synchronous extra functions.">USyncClient</a>(host, lexical_cast&lt;unsigned&gt;(port)));
<a name="l00100"></a>00100       <a class="code" href="namespaceurbi_1_1impl.html#a7479e33533f0af1dfeb48b75b6772947">contexts</a>[key] = c;
<a name="l00101"></a>00101       <span class="keywordflow">return</span> c;
<a name="l00102"></a>00102     }
<a name="l00103"></a>00103 
<a name="l00104"></a>00104     <span class="comment">/*---------------------.</span>
<a name="l00105"></a>00105 <span class="comment">    | RemoteUContextImpl.  |</span>
<a name="l00106"></a>00106 <span class="comment">    `---------------------*/</span>
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a5f56f8e7dff22a2f7cdfd1326af51f99">00108</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a5f56f8e7dff22a2f7cdfd1326af51f99" title="Setup to work on given client.">RemoteUContextImpl::RemoteUContextImpl</a>(<a class="code" href="classurbi_1_1_u_sync_client.html" title="UClient linux implementation with support for synchronous extra functions.">USyncClient</a>* client)
<a name="l00109"></a>00109       : client_(client)
<a name="l00110"></a>00110       , closed_(false)
<a name="l00111"></a>00111       , dummyUObject(0)
<a name="l00112"></a>00112       , enableRTP(true)
<a name="l00113"></a>00113       , dispatchDepth(0)
<a name="l00114"></a>00114       , dataSent(false)
<a name="l00115"></a>00115     {
<a name="l00116"></a>00116       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;<a class="code" href="classurbi_1_1_u_abstract_client.html#a574c8f649ce663ebc5cd8211a01367aa" title="Associate a callback function with a tag. New style.">setCallback</a>(<a class="code" href="namespaceurbi.html#a384e3312cf097fdbbe068d2647f46f13" title="Generate a callback wrapper used by UAbstractClient::setCallback().">callback</a>(*<span class="keyword">this</span>, &amp;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ae718df2039d6756b26f05f5935d76750" title="Dispatch a message on our connection.">RemoteUContextImpl::dispatcher</a>),
<a name="l00117"></a>00117                            <a class="code" href="namespaceurbi.html#ab84fdc7e8774b4c2586cf315a92b38e6">externalModuleTag</a>.c_str());
<a name="l00118"></a>00118       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;<a class="code" href="classurbi_1_1_u_abstract_client.html#a92f7ea2d9eebc3ea8a8b2d1b8f147a55" title="Associate a callback with local connection errors.">setClientErrorCallback</a>(<a class="code" href="namespaceurbi.html#a384e3312cf097fdbbe068d2647f46f13" title="Generate a callback wrapper used by UAbstractClient::setCallback().">callback</a>(*<span class="keyword">this</span>,
<a name="l00119"></a>00119                  &amp;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a2e40fc88477d34671b3a03fee543d18f">RemoteUContextImpl::clientError</a>));
<a name="l00120"></a>00120 
<a name="l00121"></a>00121       <span class="keyword">typedef</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <span class="keywordtype">int</span> us_t;
<a name="l00122"></a>00122 <span class="preprocessor">#define GET(Type, Part)                                                 \</span>
<a name="l00123"></a>00123 <span class="preprocessor">      Type Part =                                                       \</span>
<a name="l00124"></a>00124 <span class="preprocessor">        Type(client_-&gt;syncGet(&quot;System.timeReference.&quot; #Part)-&gt;value-&gt;val)</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span>      <a class="code" href="uobject_8cc.html#aba81fb74a32f324282c142912010e18b">GET</a>(<span class="keywordtype">int</span>, year);
<a name="l00126"></a>00126       <a class="code" href="uobject_8cc.html#aba81fb74a32f324282c142912010e18b">GET</a>(<span class="keywordtype">int</span>, month);
<a name="l00127"></a>00127       <a class="code" href="uobject_8cc.html#aba81fb74a32f324282c142912010e18b">GET</a>(<span class="keywordtype">int</span>, day);
<a name="l00128"></a>00128       <a class="code" href="uobject_8cc.html#aba81fb74a32f324282c142912010e18b">GET</a>(us_t, us);
<a name="l00129"></a>00129 <span class="preprocessor">#undef GET</span>
<a name="l00130"></a>00130 <span class="preprocessor"></span>
<a name="l00131"></a>00131       libport::utime_reference_set
<a name="l00132"></a>00132         (boost::posix_time::ptime(boost::gregorian::date(year, month, day),
<a name="l00133"></a>00133                                   boost::posix_time::microseconds(us)));
<a name="l00134"></a>00134       GD_FINFO_DEBUG(<span class="stringliteral">&quot;Remote kernel reference timestamp: %s.&quot;</span>,
<a name="l00135"></a>00135                      to_simple_string(libport::utime_reference()));
<a name="l00136"></a>00136     }
<a name="l00137"></a>00137 
<a name="l00138"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ac6f966ab4b673507b244e2981ded68c9">00138</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ac6f966ab4b673507b244e2981ded68c9">RemoteUContextImpl::~RemoteUContextImpl</a>()
<a name="l00139"></a>00139     {}
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <a class="code" href="classurbi_1_1_u_sync_client.html" title="UClient linux implementation with support for synchronous extra functions.">USyncClient</a>*
<a name="l00142"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a77c2b1cae4504097c885c93ee3c04a93">00142</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a77c2b1cae4504097c885c93ee3c04a93">RemoteUContextImpl::getClient</a>()
<a name="l00143"></a>00143     {
<a name="l00144"></a>00144       <span class="keywordflow">return</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>;
<a name="l00145"></a>00145     }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <a class="code" href="classurbi_1_1_u_object.html" title="Main UObject class definition Each UObject instance corresponds to an URBI object.">UObject</a>*
<a name="l00148"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4f11258d32605874c0d1e649d6696ed9">00148</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4f11258d32605874c0d1e649d6696ed9">RemoteUContextImpl::getDummyUObject</a>()
<a name="l00149"></a>00149     {
<a name="l00150"></a>00150       <span class="keywordflow">if</span> (!<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a3f6a434177fb47994c8948a094f89503">dummyUObject</a>)
<a name="l00151"></a>00151         <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a3f6a434177fb47994c8948a094f89503">dummyUObject</a> = <span class="keyword">new</span> <a class="code" href="classurbi_1_1_u_object.html" title="Main UObject class definition Each UObject instance corresponds to an URBI object.">UObject</a>(0, <span class="keyword">this</span>);
<a name="l00152"></a>00152       <span class="keywordflow">return</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a3f6a434177fb47994c8948a094f89503">dummyUObject</a>;
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154 
<a name="l00155"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#af9b62a9f6b0e72cd6751512e821b4751">00155</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#af9b62a9f6b0e72cd6751512e821b4751" title="Send Urbi code (ghost connection in plugin mode, default connection in remote mode).">RemoteUContextImpl::uobject_unarmorAndSend</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* a)
<a name="l00156"></a>00156     {
<a name="l00157"></a>00157       <a class="code" href="namespaceurbi.html#a2727108bc30da885740831a68908abb0" title="Send a possibly armored string to the default client.">unarmorAndSend</a>(a, <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>);
<a name="l00158"></a>00158     }
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a31054d3c5e93d40759c9fc28067b0ad5">00160</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a31054d3c5e93d40759c9fc28067b0ad5" title="Send the string to the connection hosting the UObject.">RemoteUContextImpl::send</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* a)
<a name="l00161"></a>00161     {
<a name="l00162"></a>00162       *<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a> &lt;&lt; a;
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aa328d455f5bc00df28c7ebbd4360f521">00165</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a31054d3c5e93d40759c9fc28067b0ad5" title="Send the string to the connection hosting the UObject.">RemoteUContextImpl::send</a>(<span class="keyword">const</span> <span class="keywordtype">void</span>* buf, <span class="keywordtype">size_t</span> size)
<a name="l00166"></a>00166     {
<a name="l00167"></a>00167       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;rdbuf()-&gt;sputn(static_cast&lt;const char*&gt; (buf), size);
<a name="l00168"></a>00168     }
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a734675388333d1d265dfbf6c3cb0346b">00170</a>     <a class="code" href="namespaceurbi.html#af949b0f3e9909be6b1f43cf89b975e15" title="Possible UObject running modes.">UObjectMode</a> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a734675388333d1d265dfbf6c3cb0346b" title="Return the mode in which the code is running.">RemoteUContextImpl::getRunningMode</a>()<span class="keyword"> const</span>
<a name="l00171"></a>00171 <span class="keyword">    </span>{
<a name="l00172"></a>00172       <span class="keywordflow">return</span> MODE_REMOTE;
<a name="l00173"></a>00173     }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     <a class="code" href="structurbi_1_1_u_table.html">UTable</a>&amp;
<a name="l00176"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a8668eddb2d614a0566cf513eb432ac12">00176</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a8668eddb2d614a0566cf513eb432ac12">RemoteUContextImpl::tableByName</a>(<span class="keyword">const</span> std::string&amp; n)
<a name="l00177"></a>00177     {
<a name="l00178"></a>00178 <span class="preprocessor">#define CHECK(v) if (n == #v) return v##map##_</span>
<a name="l00179"></a>00179 <span class="preprocessor"></span>      <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(access);
<a name="l00180"></a>00180       <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(event);
<a name="l00181"></a>00181       <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(eventend);
<a name="l00182"></a>00182       <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(function);
<a name="l00183"></a>00183       <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(monitor);
<a name="l00184"></a>00184 <span class="preprocessor">#undef CHECK</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (n == <span class="stringliteral">&quot;var&quot;</span> || n ==<span class="stringliteral">&quot;var_onrequest&quot;</span>)
<a name="l00186"></a>00186         <span class="keywordflow">return</span> monitormap_;
<a name="l00187"></a>00187       <span class="keywordflow">if</span> (n == <span class="stringliteral">&quot;varaccess&quot;</span>)
<a name="l00188"></a>00188         <span class="keywordflow">return</span> accessmap_;
<a name="l00189"></a>00189       <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;Unexpected table name. &quot;</span> + n);
<a name="l00190"></a>00190     }
<a name="l00191"></a>00191 
<a name="l00192"></a>00192     std::pair&lt;int, int&gt;
<a name="l00193"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aac08bdce4273da035072f9390dbd2586">00193</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aac08bdce4273da035072f9390dbd2586" title="Get the kernel major,minor version.">RemoteUContextImpl::kernelVersion</a>()<span class="keyword"> const</span>
<a name="l00194"></a>00194 <span class="keyword">    </span>{
<a name="l00195"></a>00195       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;<a class="code" href="classurbi_1_1_u_sync_client.html#ae7024d8df4bb05692d8718904734a95d">waitForKernelVersion</a>(<span class="keyword">true</span>);
<a name="l00196"></a>00196       <span class="keywordflow">return</span> std::make_pair(<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;<a class="code" href="classurbi_1_1_u_abstract_client.html#a2847dd0360913229b9d15239be848e3a" title="Major kernel version. Dies if unknown yet.">kernelMajor</a>(),
<a name="l00197"></a>00197                             <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;<a class="code" href="classurbi_1_1_u_abstract_client.html#a9d2dc1deaf5e435f33685537c44b105d" title="Minor kernel version. Dies if unknown yet.">kernelMinor</a>());
<a name="l00198"></a>00198     }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200     <span class="keywordtype">void</span>
<a name="l00201"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a1832a6778b80c1c0074bfcb3deeaac7c">00201</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a1832a6778b80c1c0074bfcb3deeaac7c" title="Called by the urbiStarter after each UObject instanciation.">RemoteUContextImpl::instanciated</a>(<a class="code" href="classurbi_1_1_u_object.html" title="Main UObject class definition Each UObject instance corresponds to an URBI object.">UObject</a>*)
<a name="l00202"></a>00202     {
<a name="l00203"></a>00203       <span class="comment">// Protect our initialization code against rescoping by &#39;,&#39;.</span>
<a name="l00204"></a>00204       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a31054d3c5e93d40759c9fc28067b0ad5" title="Send the string to the connection hosting the UObject.">send</a>(<span class="stringliteral">&quot;;&quot;</span>);
<a name="l00205"></a>00205     }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="keywordtype">void</span>
<a name="l00209"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#afa7232e5413bd7bd0be4d1b5462beae1">00209</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#afa7232e5413bd7bd0be4d1b5462beae1" title="Request a context lock from another thread to perform multiple operations.">RemoteUContextImpl::lock</a>()
<a name="l00210"></a>00210     {
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="keywordtype">void</span>
<a name="l00214"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab4bfb0be4b8e7bd4b46f06de9403f31d">00214</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab4bfb0be4b8e7bd4b46f06de9403f31d" title="Release lock acquired with lock().">RemoteUContextImpl::unlock</a>()
<a name="l00215"></a>00215     {
<a name="l00216"></a>00216     }
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     boost::asio::io_service&amp;
<a name="l00219"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a24cc1d6f89072af9b86eb465813aec84">00219</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a24cc1d6f89072af9b86eb465813aec84" title="Get the io_service used by this context.">RemoteUContextImpl::getIoService</a>()
<a name="l00220"></a>00220     {
<a name="l00221"></a>00221       <span class="keywordflow">return</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;get_io_service();
<a name="l00222"></a>00222     }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224     <span class="comment">/*--------------------.</span>
<a name="l00225"></a>00225 <span class="comment">    | RemoteUObjectImpl.  |</span>
<a name="l00226"></a>00226 <span class="comment">    `--------------------*/</span>
<a name="l00227"></a>00227 
<a name="l00228"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a7123059e0a3d5d87d6b3d71193868166">00228</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a7123059e0a3d5d87d6b3d71193868166">RemoteUObjectImpl::~RemoteUObjectImpl</a>()
<a name="l00229"></a>00229     {}
<a name="l00230"></a>00230 
<a name="l00232"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#af795df09a2ea5f910854143bd80f3dd2">00232</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#af795df09a2ea5f910854143bd80f3dd2" title="UObject constructor.">RemoteUObjectImpl::initialize</a>(<a class="code" href="classurbi_1_1_u_object.html" title="Main UObject class definition Each UObject instance corresponds to an URBI object.">UObject</a>* owner)
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234       <span class="comment">//We were called by UObject base constructor.</span>
<a name="l00235"></a>00235       <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a2e12f5b7b5ca00a1835af66e464e639f">period</a> = -1;
<a name="l00236"></a>00236       this-&gt;<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a> = owner;
<a name="l00237"></a>00237       <span class="keywordflow">if</span> (owner-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a> == <span class="stringliteral">&quot;_dummy&quot;</span>)
<a name="l00238"></a>00238         <span class="keywordflow">return</span>;
<a name="l00239"></a>00239       <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_context.html#ab3763741e122aaeffc4c4d15567980c3">ctx_</a>-&gt;<a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#acc12e9d0261feeb79b682e464e2a5bbe" title="Default implementations appends to &amp;#39;objects&amp;#39;.">registerObject</a>(owner);
<a name="l00240"></a>00240       <a class="code" href="classurbi_1_1_u_client.html" title="Linux implementation of UAbstractClient.">UClient</a>* client =
<a name="l00241"></a>00241         <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">RemoteUContextImpl</a>*<span class="keyword">&gt;</span>(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_context.html#ab3763741e122aaeffc4c4d15567980c3">ctx_</a>)-&gt;client_;
<a name="l00242"></a>00242       <a class="code" href="uobject_8hh.html#aafc97653a953786ff9a0fe791fb6ba9a" title="Send &amp;quot;\a Args | \n&amp;quot; to C.">URBI_SEND_PIPED_COMMAND_C</a>(*client,
<a name="l00243"></a>00243                                 <span class="stringliteral">&quot;class &quot;</span> &lt;&lt; <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a> &lt;&lt; <span class="stringliteral">&quot;{}&quot;</span>);
<a name="l00244"></a>00244       <a class="code" href="uobject_8hh.html#aafc97653a953786ff9a0fe791fb6ba9a" title="Send &amp;quot;\a Args | \n&amp;quot; to C.">URBI_SEND_PIPED_COMMAND_C</a>(*client,
<a name="l00245"></a>00245                                 <span class="stringliteral">&quot;external object &quot;</span> &lt;&lt; <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a>);
<a name="l00246"></a>00246       <span class="comment">// Bind update, we need it since we use a dummy message locally generated</span>
<a name="l00247"></a>00247       <span class="comment">// to trigger the periodic call.</span>
<a name="l00248"></a>00248       <a class="code" href="namespaceurbi.html#a9a91a3748ec483a48a5faec46ede46d3">createUCallback</a>(*owner, 0, <span class="stringliteral">&quot;function&quot;</span>, owner, &amp;<a class="code" href="classurbi_1_1_u_object.html#aaa326f57bb234c9725e3bcf61ae85505">UObject::update</a>,
<a name="l00249"></a>00249                       owner-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a> + <span class="stringliteral">&quot;.update&quot;</span>);
<a name="l00250"></a>00250 
<a name="l00251"></a>00251       <span class="comment">// At this point the child class constructor is called, and will</span>
<a name="l00252"></a>00252       <span class="comment">// also send piped commands.</span>
<a name="l00253"></a>00253       <span class="comment">// Then the starter will call instanciated() which will send a semicolon.</span>
<a name="l00254"></a>00254     }
<a name="l00255"></a>00255 
<a name="l00257"></a>00257     <span class="keywordtype">void</span>
<a name="l00258"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a558c4dae7290c92b94150d54566b229c">00258</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a558c4dae7290c92b94150d54566b229c" title="UObject cleaner.">RemoteUObjectImpl::clean</a>()
<a name="l00259"></a>00259     {
<a name="l00260"></a>00260       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">RemoteUContextImpl</a>&amp; ctx = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">RemoteUContextImpl</a>&amp;<span class="keyword">&gt;</span>
<a name="l00261"></a>00261         (*(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_context.html#ab3763741e122aaeffc4c4d15567980c3">ctx_</a>));
<a name="l00262"></a>00262       ctx.monitormap().clean(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a>);
<a name="l00263"></a>00263       ctx.accessmap().clean(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a>);
<a name="l00264"></a>00264       ctx.functionmap().clean(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a>);
<a name="l00265"></a>00265       ctx.eventmap().clean(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a>);
<a name="l00266"></a>00266       ctx.eventendmap().clean(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a>);
<a name="l00267"></a>00267 
<a name="l00268"></a>00268       <span class="keywordflow">if</span> (<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a6c49763fe12d36f323df5bff98d92455" title="The hub, if it exists.">objecthub</a>)
<a name="l00269"></a>00269         <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a6c49763fe12d36f323df5bff98d92455" title="The hub, if it exists.">objecthub</a>-&gt;<a class="code" href="classurbi_1_1_u_object_hub.html#ac3fe5a6534e4721377376a1dd4a8a140">members</a>.remove(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>);
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272     <span class="keywordtype">void</span>
<a name="l00273"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a2adad0659010e7afbd13a80e9e89feea">00273</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a2adad0659010e7afbd13a80e9e89feea">RemoteUObjectImpl::setUpdate</a>(ufloat t)
<a name="l00274"></a>00274     {
<a name="l00275"></a>00275       <span class="keywordflow">if</span> (<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a8b968edcdb14e0e6505b9adafed02c96">updateHandler</a>)
<a name="l00276"></a>00276       {
<a name="l00277"></a>00277         <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a8b968edcdb14e0e6505b9adafed02c96">updateHandler</a>-&gt;cancel();
<a name="l00278"></a>00278         <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a8b968edcdb14e0e6505b9adafed02c96">updateHandler</a>.reset();
<a name="l00279"></a>00279       }
<a name="l00280"></a>00280       <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a2e12f5b7b5ca00a1835af66e464e639f">period</a> = t;
<a name="l00281"></a>00281       <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#ad0c1e6af2e17241cfb50dc4297f6fd6f">onUpdate</a>();
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283 
<a name="l00284"></a>00284     <span class="keywordtype">void</span>
<a name="l00285"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#ad0c1e6af2e17241cfb50dc4297f6fd6f">00285</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#ad0c1e6af2e17241cfb50dc4297f6fd6f">RemoteUObjectImpl::onUpdate</a>()
<a name="l00286"></a>00286     {
<a name="l00287"></a>00287       <span class="keywordflow">if</span> (0 &lt; <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a2e12f5b7b5ca00a1835af66e464e639f">period</a>)
<a name="l00288"></a>00288       {
<a name="l00289"></a>00289         <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">RemoteUContextImpl</a>&amp; ctx =
<a name="l00290"></a>00290           <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">RemoteUContextImpl</a>&amp;<span class="keyword">&gt;</span>(*(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_context.html#ab3763741e122aaeffc4c4d15567980c3">ctx_</a>));
<a name="l00291"></a>00291         <a class="code" href="classurbi_1_1_u_message.html" title="Class containing all informations related to an URBI message.">UMessage</a> m(*ctx.<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>);
<a name="l00292"></a>00292         m.<a class="code" href="classurbi_1_1_u_message.html#a49559da7ba6d92767746adf62035a2c3" title="The type of this message.">type</a> = MESSAGE_DATA;
<a name="l00293"></a>00293         m.<a class="code" href="classurbi_1_1_u_message.html#a663f67700bf8eaa3fcb859e018466403" title="Associated tag.">tag</a> = <a class="code" href="namespaceurbi.html#ab84fdc7e8774b4c2586cf315a92b38e6">externalModuleTag</a>;
<a name="l00294"></a>00294         m.<a class="code" href="classurbi_1_1_u_message.html#a5a303c98ae38e5891f65490b5fa23e23" title="Set only if the message type is MESSAGE_DATA.">value</a> = <span class="keyword">new</span> <a class="code" href="classurbi_1_1_u_value.html" title="Container for a value that handles all types known to URBI.">UValue</a>(<a class="code" href="classurbi_1_1_u_list.html" title="Class storing URBI List type.">UList</a>());
<a name="l00295"></a>00295         m.<a class="code" href="classurbi_1_1_u_message.html#a5a303c98ae38e5891f65490b5fa23e23" title="Set only if the message type is MESSAGE_DATA.">value</a>-&gt;<a class="code" href="classurbi_1_1_u_value.html#a072bcbb3009dd1ada961ed2b8ed92643" title="value if of type DATA_LIST">list</a>-&gt;<a class="code" href="classurbi_1_1_u_list.html#a46668a470cda20a198f27d5c52b9a4bd">push_back</a>(<a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a14d4962c84fc44b088a6d9ad05a0886e">UEM_EVALFUNCTION</a>);
<a name="l00296"></a>00296         m.<a class="code" href="classurbi_1_1_u_message.html#a5a303c98ae38e5891f65490b5fa23e23" title="Set only if the message type is MESSAGE_DATA.">value</a>-&gt;<a class="code" href="classurbi_1_1_u_value.html#a072bcbb3009dd1ada961ed2b8ed92643" title="value if of type DATA_LIST">list</a>-&gt;<a class="code" href="classurbi_1_1_u_list.html#a46668a470cda20a198f27d5c52b9a4bd">push_back</a>(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_object.html#a5219a510e8a76ddec423c4d44fc5ee4c" title="Name of the object as seen in Urbi.">__name</a> + <span class="stringliteral">&quot;.update__0&quot;</span>);
<a name="l00297"></a>00297         m.<a class="code" href="classurbi_1_1_u_message.html#a5a303c98ae38e5891f65490b5fa23e23" title="Set only if the message type is MESSAGE_DATA.">value</a>-&gt;<a class="code" href="classurbi_1_1_u_value.html#a072bcbb3009dd1ada961ed2b8ed92643" title="value if of type DATA_LIST">list</a>-&gt;<a class="code" href="classurbi_1_1_u_list.html#a46668a470cda20a198f27d5c52b9a4bd">push_back</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00298"></a>00298         <span class="comment">// This is potentialy not the worker thread, cannot call dispatcher()</span>
<a name="l00299"></a>00299         <span class="comment">// synchronously.</span>
<a name="l00300"></a>00300         ctx.<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a77c2b1cae4504097c885c93ee3c04a93">getClient</a>()-&gt;<a class="code" href="classurbi_1_1_u_sync_client.html#a795b0fbfa5fdb33a1330f03535c6f64b" title="Overriding UAbstractclient implementation.">notifyCallbacks</a>(m);
<a name="l00301"></a>00301         <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a8b968edcdb14e0e6505b9adafed02c96">updateHandler</a> =
<a name="l00302"></a>00302           libport::asyncCall(boost::bind(&amp;<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#ad0c1e6af2e17241cfb50dc4297f6fd6f">RemoteUObjectImpl::onUpdate</a>, <span class="keyword">this</span>),
<a name="l00303"></a>00303                              useconds_t(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a2e12f5b7b5ca00a1835af66e464e639f">period</a> * 1000));
<a name="l00304"></a>00304       }
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306 
<a name="l00307"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab225cb2b353bc6fb58989f37d856ce78">00307</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab225cb2b353bc6fb58989f37d856ce78" title="Yield execution until next cycle.">RemoteUContextImpl::yield</a>()<span class="keyword"> const</span>
<a name="l00308"></a>00308 <span class="keyword">    </span>{
<a name="l00309"></a>00309       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a47bd4db85bf6c885d05c9a7fb22c9476" title="Yield execution until deadline is met (see libport::utime()).">yield_until</a>(libport::utime());
<a name="l00310"></a>00310     }
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a47bd4db85bf6c885d05c9a7fb22c9476">00312</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a47bd4db85bf6c885d05c9a7fb22c9476" title="Yield execution until deadline is met (see libport::utime()).">RemoteUContextImpl::yield_until</a>(libport::utime_t deadline)<span class="keyword"> const</span>
<a name="l00313"></a>00313 <span class="keyword">    </span>{
<a name="l00314"></a>00314       <span class="comment">// Ensure processEvents is called at least once.</span>
<a name="l00315"></a>00315       <span class="keywordflow">while</span> (<span class="keyword">true</span>)
<a name="l00316"></a>00316       {
<a name="l00317"></a>00317         <span class="keywordtype">bool</span> processed =
<a name="l00318"></a>00318           <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classurbi_1_1_u_sync_client.html" title="UClient linux implementation with support for synchronous extra functions.">USyncClient</a>*<span class="keyword">&gt;</span>(<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>)-&gt;processEvents(0);
<a name="l00319"></a>00319         <span class="keywordflow">if</span> (deadline &lt; libport::utime())
<a name="l00320"></a>00320           <span class="keywordflow">return</span>;
<a name="l00321"></a>00321         <span class="keywordflow">if</span> (!processed)
<a name="l00322"></a>00322           usleep(0);
<a name="l00323"></a>00323       }
<a name="l00324"></a>00324     }
<a name="l00325"></a>00325 
<a name="l00326"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a3ec9bb9daed515314f11c84b33d66f3d">00326</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a3ec9bb9daed515314f11c84b33d66f3d" title="Yield execution until something else is scheduled, or until a message is received in remote mode...">RemoteUContextImpl::yield_until_things_changed</a>()<span class="keyword"> const</span>
<a name="l00327"></a>00327 <span class="keyword">    </span>{
<a name="l00328"></a>00328       <span class="keywordflow">while</span> (<span class="keyword">true</span>)
<a name="l00329"></a>00329       {
<a name="l00330"></a>00330         <span class="keywordflow">if</span> (dynamic_cast&lt;USyncClient*&gt;(<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>)-&gt;processEvents(0))
<a name="l00331"></a>00331           <span class="keywordflow">return</span>;
<a name="l00332"></a>00332         usleep(0);
<a name="l00333"></a>00333       }
<a name="l00334"></a>00334     }
<a name="l00335"></a>00335 
<a name="l00336"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ae764d34a1dfc4a6dcc275d047411f149">00336</a>     <span class="keywordtype">void</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ae764d34a1dfc4a6dcc275d047411f149" title="If s is true, mark the current task as having no side effect.">RemoteUContextImpl::side_effect_free_set</a>(<span class="keywordtype">bool</span>)
<a name="l00337"></a>00337     {}
<a name="l00338"></a>00338 
<a name="l00339"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4fbf68687853200812b4b17f46e49ef9">00339</a>     <span class="keywordtype">bool</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4fbf68687853200812b4b17f46e49ef9" title="Get the current side_effect_free state.">RemoteUContextImpl::side_effect_free_get</a>()<span class="keyword"> const</span>
<a name="l00340"></a>00340 <span class="keyword">    </span>{
<a name="l00341"></a>00341       <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00345"></a><a class="code" href="namespaceurbi_1_1impl.html#a2bff8aaaa52040c03f930280bc13d408">00345</a>     <a class="code" href="namespaceurbi_1_1impl.html#a2bff8aaaa52040c03f930280bc13d408">call_result</a>(<a class="code" href="classurbi_1_1_u_abstract_client.html" title="Interface for an URBI wrapper object.">UAbstractClient</a>* client, std::string var,
<a name="l00346"></a>00346                 <span class="keyword">const</span> <a class="code" href="classurbi_1_1_u_value.html" title="Container for a value that handles all types known to URBI.">UValue</a>&amp; retval, <span class="keyword">const</span> std::exception* e)
<a name="l00347"></a>00347     {
<a name="l00348"></a>00348       <span class="comment">// var is empty for internally generated messages (such as update())</span>
<a name="l00349"></a>00349       <span class="keywordflow">if</span> (var.empty())
<a name="l00350"></a>00350         <span class="keywordflow">return</span>;
<a name="l00351"></a>00351       <span class="comment">// This method can be called by a thread from the Thread Pool because</span>
<a name="l00352"></a>00352       <span class="comment">// it is used as a callback function.  Thus we have to declare the</span>
<a name="l00353"></a>00353       <span class="comment">// category for the debugger used by the current thread.</span>
<a name="l00354"></a>00354       GD_FINFO_DUMP(<span class="stringliteral">&quot;... dispatch %s done&quot;</span>, var);
<a name="l00355"></a>00355       <span class="keywordflow">if</span> (e)
<a name="l00356"></a>00356       {
<a name="l00357"></a>00357          <a class="code" href="uobject_8hh.html#aebc88dc3f91dbf31849e5f45837fcb5b">URBI_SEND_COMMA_COMMAND_C</a>
<a name="l00358"></a>00358            (*client,
<a name="l00359"></a>00359             <span class="stringliteral">&quot;Global.UObject.funCall(\&quot;&quot;</span> &lt;&lt; var &lt;&lt; <span class="stringliteral">&quot;\&quot;, &quot;</span>
<a name="l00360"></a>00360             &lt;&lt; <span class="stringliteral">&quot;Exception.new(\&quot;&quot;</span>
<a name="l00361"></a>00361             &lt;&lt; <span class="stringliteral">&quot;Exception while calling remote bound method: &quot;</span>
<a name="l00362"></a>00362             &lt;&lt; libport::escape(e-&gt;what())
<a name="l00363"></a>00363             &lt;&lt; <span class="stringliteral">&quot;\&quot;))&quot;</span>);
<a name="l00364"></a>00364       }
<a name="l00365"></a>00365       <span class="keywordflow">else</span>
<a name="l00366"></a>00366         <span class="keywordflow">switch</span> (retval.<a class="code" href="classurbi_1_1_u_value.html#a0300e8defe31b165b2b00ba190420f09">type</a>)
<a name="l00367"></a>00367         {
<a name="l00368"></a>00368         <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a5443afbb6251a2a6f54cbf3c32e59f3daf0b796de962926c04ce1c550d6f6b1cb">DATA_BINARY</a>:
<a name="l00369"></a>00369           <span class="comment">// Send it</span>
<a name="l00370"></a>00370           <span class="comment">// URBI_SEND_COMMAND does not now how to send binary since it</span>
<a name="l00371"></a>00371           <span class="comment">// depends on the kernel version.</span>
<a name="l00372"></a>00372           client-&gt;<a class="code" href="group___sending.html#ga17f11931cc39f95697e8ab21222372d0" title="Lock the send buffer (for backward compatibility, will be removed in future versions).">startPack</a>();
<a name="l00373"></a>00373           *client &lt;&lt; <span class="stringliteral">&quot;Global.UObject.funCall(\&quot;&quot;</span> &lt;&lt; var &lt;&lt; <span class="stringliteral">&quot;\&quot;, &quot;</span>;
<a name="l00374"></a>00374           client-&gt;<a class="code" href="group___sending.html#ga5f5836b7f8910ab9992eae177ffa435b" title="Send an Urbi command.">send</a>(retval);
<a name="l00375"></a>00375           *client &lt;&lt; <span class="stringliteral">&quot;),&quot;</span>;
<a name="l00376"></a>00376           client-&gt;<a class="code" href="group___sending.html#ga9e161015bcbdd77d6722e2c7ead18871" title="Unlock the send buffer (for backward compatibility, will be removed in future versions).">endPack</a>();
<a name="l00377"></a>00377           <span class="keywordflow">break</span>;
<a name="l00378"></a>00378 
<a name="l00379"></a>00379         <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a5443afbb6251a2a6f54cbf3c32e59f3da37930b63d7d14b2efdf1b6eb0e7514d9">DATA_VOID</a>:
<a name="l00380"></a>00380           <a class="code" href="uobject_8hh.html#ae2ae93bf93e8afd08ca13cbf6a41b97f" title="Send &amp;quot;\a Args ; \n&amp;quot; to C.">URBI_SEND_COMMAND_C</a>
<a name="l00381"></a>00381             (*client,
<a name="l00382"></a>00382              <span class="stringliteral">&quot;Global.UObject.funCall(\&quot;&quot;</span> &lt;&lt; var &lt;&lt; <span class="stringliteral">&quot;\&quot;)&quot;</span>);
<a name="l00383"></a>00383           <span class="keywordflow">break</span>;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385         <span class="keywordflow">default</span>:
<a name="l00386"></a>00386           <a class="code" href="uobject_8hh.html#aebc88dc3f91dbf31849e5f45837fcb5b">URBI_SEND_COMMA_COMMAND_C</a>
<a name="l00387"></a>00387             (*client,
<a name="l00388"></a>00388              <span class="stringliteral">&quot;Global.UObject.funCall(\&quot;&quot;</span> &lt;&lt; var &lt;&lt; <span class="stringliteral">&quot;\&quot;, &quot;</span> &lt;&lt; retval &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>);
<a name="l00389"></a>00389           <span class="keywordflow">break</span>;
<a name="l00390"></a>00390         }
<a name="l00391"></a>00391     }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393     <a class="code" href="namespaceurbi.html#a63f30f52002e7e7f853a12a8c1172f41" title="Return values for the callcack functions.">UCallbackAction</a>
<a name="l00394"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ae718df2039d6756b26f05f5935d76750">00394</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ae718df2039d6756b26f05f5935d76750" title="Dispatch a message on our connection.">RemoteUContextImpl::dispatcher</a>(<span class="keyword">const</span> <a class="code" href="classurbi_1_1_u_message.html" title="Class containing all informations related to an URBI message.">UMessage</a>&amp; msg)
<a name="l00395"></a>00395     {
<a name="l00396"></a>00396       <span class="keywordflow">if</span> (<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aac044d645f96132644d67611438f2702" title="True if we received a clientError message.">closed_</a>)
<a name="l00397"></a>00397         <span class="keywordflow">return</span> URBI_CONTINUE;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399       <span class="comment">//check message type</span>
<a name="l00400"></a>00400       <a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">REQUIRE</a>(msg.<a class="code" href="classurbi_1_1_u_message.html#a49559da7ba6d92767746adf62035a2c3" title="The type of this message.">type</a> == <a class="code" href="namespaceurbi.html#af4858e704e4932543908706b6b483b69a147c0686d9f55f18146181a08ffa4a1a" title="All other messages.">MESSAGE_DATA</a>,
<a name="l00401"></a>00401               <span class="stringliteral">&quot;Component Error: unknown message content, type %d\n&quot;</span>,
<a name="l00402"></a>00402               msg.<a class="code" href="classurbi_1_1_u_message.html#a49559da7ba6d92767746adf62035a2c3" title="The type of this message.">type</a>);
<a name="l00403"></a>00403       <a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">REQUIRE</a>(msg.<a class="code" href="classurbi_1_1_u_message.html#a5a303c98ae38e5891f65490b5fa23e23" title="Set only if the message type is MESSAGE_DATA.">value</a>-&gt;<a class="code" href="classurbi_1_1_u_value.html#a0300e8defe31b165b2b00ba190420f09">type</a> == <a class="code" href="namespaceurbi.html#a5443afbb6251a2a6f54cbf3c32e59f3dad7e7715f465fa7ad35e3d2ac98adbc38">DATA_LIST</a>,
<a name="l00404"></a>00404               <span class="stringliteral">&quot;Component Error: unknown message content, value type %d\n&quot;</span>,
<a name="l00405"></a>00405               msg.<a class="code" href="classurbi_1_1_u_message.html#a5a303c98ae38e5891f65490b5fa23e23" title="Set only if the message type is MESSAGE_DATA.">value</a>-&gt;<a class="code" href="classurbi_1_1_u_value.html#a0300e8defe31b165b2b00ba190420f09">type</a>);
<a name="l00406"></a>00406 
<a name="l00407"></a>00407       <a class="code" href="classurbi_1_1_u_list.html" title="Class storing URBI List type.">UList</a>&amp; array = *msg.<a class="code" href="classurbi_1_1_u_message.html#a5a303c98ae38e5891f65490b5fa23e23" title="Set only if the message type is MESSAGE_DATA.">value</a>-&gt;<a class="code" href="classurbi_1_1_u_value.html#a072bcbb3009dd1ada961ed2b8ed92643" title="value if of type DATA_LIST">list</a>;
<a name="l00408"></a>00408 
<a name="l00409"></a>00409       <a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">REQUIRE</a>(array[0].type == <a class="code" href="namespaceurbi.html#a5443afbb6251a2a6f54cbf3c32e59f3dad44dc6b3942ec1a12bcba660941673c1">DATA_DOUBLE</a>,
<a name="l00410"></a>00410               <span class="stringliteral">&quot;Component Error: invalid server message type %d\n&quot;</span>,
<a name="l00411"></a>00411               array[0].type);
<a name="l00412"></a>00412 
<a name="l00413"></a>00413       FINALLY(((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>&amp; , <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aaabbef0f8545ad65ba1fe8e91867253e">dispatchDepth</a>)), <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aaabbef0f8545ad65ba1fe8e91867253e">dispatchDepth</a>--);
<a name="l00414"></a>00414       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aaabbef0f8545ad65ba1fe8e91867253e">dispatchDepth</a>++;
<a name="l00415"></a>00415       <a class="code" href="namespaceurbi.html#adf3a93f92beefc997807cb9da38f18a0">setCurrentContext</a>(<span class="keyword">this</span>);
<a name="l00416"></a>00416       <span class="keywordflow">switch</span> ((<a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50">USystemExternalMessage</a>)(<span class="keywordtype">int</span>)array[0])
<a name="l00417"></a>00417       {
<a name="l00418"></a>00418       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50ae0bacd735a9fc53db478a8cee55377b7">UEM_ASSIGNVALUE</a>:
<a name="l00419"></a>00419         <a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">REQUIRE</a>(array.size() == 4,
<a name="l00420"></a>00420                 <span class="stringliteral">&quot;Component Error: Invalid number &quot;</span>
<a name="l00421"></a>00421                 <span class="stringliteral">&quot;of arguments in the server message: %lu (expected 4)\n&quot;</span>,
<a name="l00422"></a>00422                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(array.size()));
<a name="l00423"></a>00423         <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#abfd3fbb3e49f933732625bd41bdf7718" title="Handle an assignment request.">assignMessage</a>(array[1], array[2], array[3]);
<a name="l00424"></a>00424         <span class="keywordflow">break</span>;
<a name="l00425"></a>00425 
<a name="l00426"></a>00426       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a14d4962c84fc44b088a6d9ad05a0886e">UEM_EVALFUNCTION</a>:
<a name="l00427"></a>00427         <a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">REQUIRE</a>(3 &lt;= array.size(),
<a name="l00428"></a>00428                 <span class="stringliteral">&quot;Component Error: Invalid number &quot;</span>
<a name="l00429"></a>00429                 <span class="stringliteral">&quot;of arguments in the server message: %lu\n&quot;</span>,
<a name="l00430"></a>00430                 <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(array.size()));
<a name="l00431"></a>00431         <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#acad2e7cc6790604938042a8564b7b770" title="Handle a function call.">evalFunctionMessage</a>(array[1], array[2], array);
<a name="l00432"></a>00432         <span class="keywordflow">break</span>;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a13c1629f0e307fa93f7e1afea5e14ec7">UEM_EMITEVENT</a>:
<a name="l00435"></a>00435         eval_call(eventmap(), array);
<a name="l00436"></a>00436         <span class="keywordflow">break</span>;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a3a2d5c9555bf9f3312b34c9c17e463e7">UEM_ENDEVENT</a>:
<a name="l00439"></a>00439         eval_call(eventendmap(), array);
<a name="l00440"></a>00440         <span class="keywordflow">break</span>;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a049e5024764d91fefdca180487f918d0">UEM_NEW</a>:
<a name="l00443"></a>00443       {
<a name="l00444"></a>00444         <a class="code" href="classurbi_1_1impl_1_1_u_context_impl_1_1_cleanup_stack.html" title="Cleanup Stack RAII.">impl::UContextImpl::CleanupStack</a> s_(*<span class="keyword">this</span>);
<a name="l00445"></a>00445         objects_type::iterator i = <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.find(std::string(array[2]));
<a name="l00446"></a>00446         <a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">REQUIRE</a>(i != <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.end(),
<a name="l00447"></a>00447                 <span class="stringliteral">&quot;No such objects %s\n&quot;</span>, std::string(array[2]).c_str());
<a name="l00448"></a>00448         <a class="code" href="classurbi_1_1base_u_r_b_i_starter.html">baseURBIStarter</a>* bsa = i-&gt;second-&gt;cloner;
<a name="l00449"></a>00449         GD_FINFO_DEBUG(<span class="stringliteral">&quot;instantiating from %s, name: %s&quot;</span>, bsa, array[1]);
<a name="l00450"></a>00450         bsa-&gt;instanciate(<span class="keyword">this</span>, (std::string) array[1]);
<a name="l00451"></a>00451       }
<a name="l00452"></a>00452       <span class="keywordflow">break</span>;
<a name="l00453"></a>00453 
<a name="l00454"></a>00454       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a71fd1f9106aedecf148a8ae475678f4f">UEM_DELETE</a>:
<a name="l00455"></a>00455       {
<a name="l00456"></a>00456         <a class="code" href="classurbi_1_1impl_1_1_u_context_impl_1_1_cleanup_stack.html" title="Cleanup Stack RAII.">impl::UContextImpl::CleanupStack</a> s_(*<span class="keyword">this</span>);
<a name="l00457"></a>00457         objects_type::iterator i = <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.find(std::string(array[1]));
<a name="l00458"></a>00458         <span class="keywordflow">if</span> (i == <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.end())
<a name="l00459"></a>00459           <span class="keywordflow">break</span>;
<a name="l00460"></a>00460         <span class="keywordflow">if</span> (<a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.size() == 1)
<a name="l00461"></a>00461           <a class="code" href="namespaceurbi.html#ae2d61f9a8e2c575f660323f0fe01f646" title="Terminate your URBI program.">exit</a>(0);
<a name="l00462"></a>00462         <span class="keywordflow">else</span>
<a name="l00463"></a>00463           <span class="keyword">delete</span> i-&gt;second;
<a name="l00464"></a>00464         <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.erase(i);
<a name="l00465"></a>00465       }
<a name="l00466"></a>00466       <span class="keywordflow">break</span>;
<a name="l00467"></a>00467       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a5609cfaedd1adaf46cac3735c50f069f">UEM_INIT</a>:
<a name="l00468"></a>00468         <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#abb1653e8a64b35f03e603a3544be0082" title="Inject all loaded uobjects in the system by calling newUObjectClass.">init</a>();
<a name="l00469"></a>00469         <span class="keywordflow">break</span>;
<a name="l00470"></a>00470       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a0dd4045bf6833298712ae5c76ea5fdd1">UEM_TIMER</a>:
<a name="l00471"></a>00471         {
<a name="l00472"></a>00472         std::string cbname = array[1];
<a name="l00473"></a>00473         TimerMap::iterator i = <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>.find(cbname);
<a name="l00474"></a>00474         <span class="keywordflow">if</span> (i != <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>.end())
<a name="l00475"></a>00475           i-&gt;second.second-&gt;call();
<a name="l00476"></a>00476         }
<a name="l00477"></a>00477         <span class="keywordflow">break</span>;
<a name="l00478"></a>00478       <span class="keywordflow">case</span> <a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50ae821c102fdb20037e6770657235779fb">UEM_NORTP</a>:
<a name="l00479"></a>00479         GD_WARN(<span class="stringliteral">&quot;Disabling RTP as requested by engine&quot;</span>);
<a name="l00480"></a>00480         <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#af8a4547ee63cdf9a7968adc2e8bc3cee">enableRTP</a> = <span class="keyword">false</span>;
<a name="l00481"></a>00481         <span class="keywordflow">break</span>;
<a name="l00482"></a>00482       <span class="keywordflow">default</span>:
<a name="l00483"></a>00483         <a class="code" href="uobject_8cc.html#a44f67612b353177afd9f7fd687db9c2e">REQUIRE</a>(<span class="keyword">false</span>,
<a name="l00484"></a>00484                 <span class="stringliteral">&quot;Component Error: unknown server message type number %d\n&quot;</span>,
<a name="l00485"></a>00485                 (<span class="keywordtype">int</span>)array[0]);
<a name="l00486"></a>00486       }
<a name="l00487"></a>00487 
<a name="l00488"></a>00488       <span class="comment">// Send a terminating &#39;;&#39; since code send by the UObject API uses &#39;|&#39;.</span>
<a name="l00489"></a>00489       <span class="comment">// But only in outermost dispatch call</span>
<a name="l00490"></a>00490       <span class="keywordflow">if</span> (<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aaabbef0f8545ad65ba1fe8e91867253e">dispatchDepth</a> == 1 &amp;&amp; <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4451d7043d1bd9496d6920b4a10104a0">dataSent</a>)
<a name="l00491"></a>00491       {
<a name="l00492"></a>00492         <a class="code" href="uobject_8hh.html#ae2ae93bf93e8afd08ca13cbf6a41b97f" title="Send &amp;quot;\a Args ; \n&amp;quot; to C.">URBI_SEND_COMMAND_C</a>(*<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00493"></a>00493         <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4451d7043d1bd9496d6920b4a10104a0">dataSent</a> = <span class="keyword">false</span>;
<a name="l00494"></a>00494       }
<a name="l00495"></a>00495       <span class="keywordflow">return</span> URBI_CONTINUE;
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     <span class="keywordtype">void</span>
<a name="l00499"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#abfd3fbb3e49f933732625bd41bdf7718">00499</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#abfd3fbb3e49f933732625bd41bdf7718" title="Handle an assignment request.">RemoteUContextImpl::assignMessage</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="namespaceurbi.html#a6f68a7c74a3236e297c556f08c8e532b">name</a>,
<a name="l00500"></a>00500                                       <span class="keyword">const</span> <a class="code" href="classurbi_1_1_u_value.html" title="Container for a value that handles all types known to URBI.">UValue</a>&amp; v, time_t ts)
<a name="l00501"></a>00501     {
<a name="l00502"></a>00502       <span class="keywordtype">int</span> nv = 0, nc = 0;
<a name="l00503"></a>00503       <span class="keywordflow">if</span> (std::list&lt;UVar*&gt; *us = varmap().find0(name))
<a name="l00504"></a>00504       {
<a name="l00505"></a>00505         <span class="keywordflow">foreach</span> (<a class="code" href="classurbi_1_1_u_var.html" title="UVar class definition.">UVar</a>* u, *us)
<a name="l00506"></a>00506         {
<a name="l00507"></a>00507           nv++;
<a name="l00508"></a>00508           <span class="keywordflow">if</span> (<a class="code" href="classurbi_1_1impl_1_1_remote_u_var_impl.html">RemoteUVarImpl</a>* impl = dynamic_cast&lt;RemoteUVarImpl*&gt;(u-&gt;<a class="code" href="classurbi_1_1_u_var.html#a9d93de45279b3ed6cf1227e8565c8024">impl_</a>))
<a name="l00509"></a>00509             impl-&gt;update(v, ts);
<a name="l00510"></a>00510           <span class="keywordflow">else</span>
<a name="l00511"></a>00511           {
<a name="l00512"></a>00512             GD_FERROR(<span class="stringliteral">&quot;Unable to cast %x to a RemoteUVarImpl.&quot;</span>, u-&gt;<a class="code" href="classurbi_1_1_u_var.html#a9d93de45279b3ed6cf1227e8565c8024">impl_</a>);
<a name="l00513"></a>00513             std::abort();
<a name="l00514"></a>00514           }
<a name="l00515"></a>00515         }
<a name="l00516"></a>00516       }
<a name="l00517"></a>00517       <span class="keywordflow">if</span> (<a class="code" href="structurbi_1_1_u_table.html#a9746883305270c69811db8b6f7454d75" title="The list call backs.">UTable::callbacks_type</a>* cs = monitormap().find0(name))
<a name="l00518"></a>00518       {
<a name="l00519"></a>00519         <span class="keywordflow">foreach</span> (<a class="code" href="classurbi_1_1_u_generic_callback.html" title="Function and Event storage mechanism This heavily overloaded class is the only way in C++ to make lif...">UGenericCallback</a> *c, *cs)
<a name="l00520"></a>00520         {
<a name="l00521"></a>00521           nc++;
<a name="l00522"></a>00522           <span class="comment">// test of return value here</span>
<a name="l00523"></a>00523           <a class="code" href="classurbi_1_1_u_list.html" title="Class storing URBI List type.">UList</a> u;
<a name="l00524"></a>00524           u.<a class="code" href="classurbi_1_1_u_list.html#ab77bae91e75a333d8ad75dc2cb10ad23">array</a>.push_back(<span class="keyword">new</span> <a class="code" href="classurbi_1_1_u_value.html" title="Container for a value that handles all types known to URBI.">UValue</a>());
<a name="l00525"></a>00525           u[0].storage = c-&gt;<a class="code" href="classurbi_1_1_u_generic_callback.html#ae18e4249d436de423b12f54fb62cafea" title="Ptr to the hooked UVar, optional.">target</a>;
<a name="l00526"></a>00526           c-&gt;<a class="code" href="classurbi_1_1_u_generic_callback.html#a0f8a67ca3a70475b41ef3f5d90af8ef7" title="Start evaluation, call onDone with result when done.">eval</a>(u);
<a name="l00527"></a>00527         }
<a name="l00528"></a>00528       }
<a name="l00529"></a>00529     }
<a name="l00530"></a>00530 
<a name="l00531"></a>00531     <span class="keywordtype">void</span>
<a name="l00532"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#acad2e7cc6790604938042a8564b7b770">00532</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#acad2e7cc6790604938042a8564b7b770" title="Handle a function call.">RemoteUContextImpl::evalFunctionMessage</a>(<span class="keyword">const</span> std::string&amp; <a class="code" href="namespaceurbi.html#a6f68a7c74a3236e297c556f08c8e532b">name</a>,
<a name="l00533"></a>00533                                             <span class="keyword">const</span> std::string&amp; var,
<a name="l00534"></a>00534                                             <a class="code" href="classurbi_1_1_u_list.html" title="Class storing URBI List type.">UList</a>&amp; args)
<a name="l00535"></a>00535     {
<a name="l00536"></a>00536       GD_FINFO_DUMP(<span class="stringliteral">&quot;dispatch call %s = %s...&quot;</span>, var, name);
<a name="l00537"></a>00537       <a class="code" href="structurbi_1_1_u_table.html#a9746883305270c69811db8b6f7454d75" title="The list call backs.">UTable::callbacks_type</a> funs = functionmap()[name];
<a name="l00538"></a>00538       UTable::callbacks_type::iterator i = funs.begin();
<a name="l00539"></a>00539       <span class="keywordflow">if</span> (i == funs.end())
<a name="l00540"></a>00540         <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;no callback found&quot;</span>);
<a name="l00541"></a>00541       args.<a class="code" href="classurbi_1_1_u_list.html#a70a2178213cdc212a727adfe60f311ca">setOffset</a>(3);
<a name="l00542"></a>00542       (*i)-&gt;eval(args,
<a name="l00543"></a>00543                  boost::bind(&amp;<a class="code" href="namespaceurbi_1_1impl.html#a2bff8aaaa52040c03f930280bc13d408">call_result</a>, <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>, var, _1, _2));
<a name="l00544"></a>00544     }
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     <span class="keywordtype">void</span>
<a name="l00547"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aad881642c2fe74a7bb9b409fce8ccea9">00547</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aad881642c2fe74a7bb9b409fce8ccea9" title="Called to instanciate the first Object of class.">RemoteUContextImpl::newUObjectClass</a>(<a class="code" href="classurbi_1_1base_u_r_b_i_starter.html">baseURBIStarter</a>* s)
<a name="l00548"></a>00548     {
<a name="l00549"></a>00549       s-&gt;<a class="code" href="classurbi_1_1base_u_r_b_i_starter.html#ade8314bbad0be8042928fc4d59d9c340" title="Create an instance of the UObject.">instanciate</a>(<span class="keyword">this</span>);
<a name="l00550"></a>00550     }
<a name="l00551"></a>00551     <span class="keywordtype">void</span>
<a name="l00552"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a2a85fea73dad022b06c574d2854cf620">00552</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a2a85fea73dad022b06c574d2854cf620">RemoteUContextImpl::newUObjectHubClass</a>(<a class="code" href="classurbi_1_1base_u_r_b_i_starter_hub.html" title="URBIStarter base class used to store heterogeneous template class objects in starterlist.">baseURBIStarterHub</a>* s)
<a name="l00553"></a>00553     {
<a name="l00554"></a>00554       s-&gt;<a class="code" href="classurbi_1_1base_u_r_b_i_starter_hub.html#a4f0f67afd1065ce74fef301d71d00016" title="Used to provide a wrapper to initialize objects in starterlist.">instanciate</a>(<span class="keyword">this</span>);
<a name="l00555"></a>00555     }
<a name="l00556"></a>00556 
<a name="l00557"></a>00557     <span class="comment">/*---------------------.</span>
<a name="l00558"></a>00558 <span class="comment">    | UObjects accessors.  |</span>
<a name="l00559"></a>00559 <span class="comment">    `---------------------*/</span>
<a name="l00560"></a>00560 
<a name="l00561"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a46a0ec8b0a389b7bda4a8e82fe54459d">00561</a>     <a class="code" href="namespaceurbi.html#a3c025af4ac4c57b9e5ca9e168732e97d">TimerHandle</a> <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a46a0ec8b0a389b7bda4a8e82fe54459d">RemoteUContextImpl::setTimer</a>(<a class="code" href="classurbi_1_1_u_timer_callback.html" title="Timer mechanism.">UTimerCallback</a>* cb)
<a name="l00562"></a>00562     {
<a name="l00563"></a>00563       cb-&gt;<a class="code" href="classurbi_1_1_u_timer_callback.html#a525bcf48aa4e412bf3842c2b4c0c36e2">call</a>();
<a name="l00564"></a>00564       libport::AsyncCallHandler h =
<a name="l00565"></a>00565         libport::asyncCall(
<a name="l00566"></a>00566                            boost::bind(&amp;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#acf08a2dc7698f80600397437cb19c394">RemoteUContextImpl::onTimer</a>, <span class="keyword">this</span>, cb),
<a name="l00567"></a>00567                            useconds_t(cb-&gt;<a class="code" href="classurbi_1_1_u_timer_callback.html#a3f4e3369294c853c72bcad5758440511">period</a> * 1000));
<a name="l00568"></a>00568       libport::BlockLock bl(<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab3463ed8067949bd0e66a9954daa40ac">mapLock</a>);
<a name="l00569"></a>00569       std::string cbname = <span class="stringliteral">&quot;timer&quot;</span> + string_cast(cb);
<a name="l00570"></a>00570       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>[cbname] = std::make_pair(h, cb);
<a name="l00571"></a>00571       <span class="keywordflow">return</span> <a class="code" href="namespaceurbi.html#a3c025af4ac4c57b9e5ca9e168732e97d">TimerHandle</a>(<span class="keyword">new</span> std::string(cbname));
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573 
<a name="l00574"></a>00574     <span class="keywordtype">void</span>
<a name="l00575"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#acf08a2dc7698f80600397437cb19c394">00575</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#acf08a2dc7698f80600397437cb19c394">RemoteUContextImpl::onTimer</a>(<a class="code" href="classurbi_1_1_u_timer_callback.html" title="Timer mechanism.">UTimerCallback</a>* cb)
<a name="l00576"></a>00576     {
<a name="l00577"></a>00577       std::string cbname = <span class="stringliteral">&quot;timer&quot;</span> + string_cast(cb);
<a name="l00578"></a>00578       {
<a name="l00579"></a>00579         libport::BlockLock bl(<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab3463ed8067949bd0e66a9954daa40ac">mapLock</a>);
<a name="l00580"></a>00580         <span class="keywordflow">if</span> (!libport::mhas(<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>, cbname))
<a name="l00581"></a>00581           <span class="keywordflow">return</span>;
<a name="l00582"></a>00582       }
<a name="l00583"></a>00583       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>-&gt;<a class="code" href="classurbi_1_1_u_sync_client.html#a795b0fbfa5fdb33a1330f03535c6f64b" title="Overriding UAbstractclient implementation.">notifyCallbacks</a>(<a class="code" href="classurbi_1_1_u_message.html" title="Class containing all informations related to an URBI message.">UMessage</a>(*<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>, 0,
<a name="l00584"></a>00584                                         <a class="code" href="namespaceurbi.html#ab84fdc7e8774b4c2586cf315a92b38e6">externalModuleTag</a>.c_str(),
<a name="l00585"></a>00585           (<span class="stringliteral">&quot;[&quot;</span>
<a name="l00586"></a>00586           + string_cast(<a class="code" href="namespaceurbi.html#a2e18fb0edbcaa1f96ffd75256aa56d50a0dd4045bf6833298712ae5c76ea5fdd1">UEM_TIMER</a>) + <span class="stringliteral">&quot;,&quot;</span>
<a name="l00587"></a>00587           + <span class="charliteral">&#39;&quot;&#39;</span> + cbname + <span class="charliteral">&#39;&quot;&#39;</span>
<a name="l00588"></a>00588           +<span class="stringliteral">&quot;]&quot;</span>).c_str()));
<a name="l00589"></a>00589 
<a name="l00590"></a>00590       libport::BlockLock bl(<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab3463ed8067949bd0e66a9954daa40ac">mapLock</a>);
<a name="l00591"></a>00591       libport::AsyncCallHandler h =
<a name="l00592"></a>00592         libport::asyncCall(
<a name="l00593"></a>00593                            boost::bind(&amp;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#acf08a2dc7698f80600397437cb19c394">RemoteUContextImpl::onTimer</a>, <span class="keyword">this</span>, cb),
<a name="l00594"></a>00594                            useconds_t(cb-&gt;<a class="code" href="classurbi_1_1_u_timer_callback.html#a3f4e3369294c853c72bcad5758440511">period</a> * 1000));
<a name="l00595"></a>00595       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>[cbname] = std::make_pair(h, cb);
<a name="l00596"></a>00596     }
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     <span class="keywordtype">bool</span>
<a name="l00599"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a04c5f041996bccd20c2aa65b3e83c61b">00599</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a04c5f041996bccd20c2aa65b3e83c61b">RemoteUObjectImpl::removeTimer</a>(<a class="code" href="namespaceurbi.html#a3c025af4ac4c57b9e5ca9e168732e97d">TimerHandle</a> h)
<a name="l00600"></a>00600     {
<a name="l00601"></a>00601       <span class="keywordflow">if</span> (!h)
<a name="l00602"></a>00602         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00603"></a>00603       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">RemoteUContextImpl</a>* ctx = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html">RemoteUContextImpl</a>*<span class="keyword">&gt;</span>(<a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html#a06712de2d7a741322cc8683c50d7fdb2">owner_</a>-&gt;<a class="code" href="classurbi_1_1_u_context.html#ab3763741e122aaeffc4c4d15567980c3">ctx_</a>);
<a name="l00604"></a>00604       libport::BlockLock bl(ctx-&gt;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab3463ed8067949bd0e66a9954daa40ac">mapLock</a>);
<a name="l00605"></a>00605       <span class="comment">// Should not happen, but you never know...</span>
<a name="l00606"></a>00606       <span class="keywordflow">if</span> (!libport::mhas(ctx-&gt;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>, *h))
<a name="l00607"></a>00607         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00608"></a>00608       ctx-&gt;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>[*h].first-&gt;cancel();
<a name="l00609"></a>00609       ctx-&gt;<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7ae3b9ea28bb543ef57bdb67631e86e7">timerMap</a>.erase(*h);
<a name="l00610"></a>00610       h.reset();
<a name="l00611"></a>00611       <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613 
<a name="l00614"></a>00614     <span class="keywordtype">void</span>
<a name="l00615"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab8008f7ec582883a19a3e8d8ef6189e8">00615</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab8008f7ec582883a19a3e8d8ef6189e8">RemoteUContextImpl::call</a>(<span class="keyword">const</span> std::string&amp; <span class="keywordtype">object</span>,
<a name="l00616"></a>00616                              <span class="keyword">const</span> std::string&amp; method,
<a name="l00617"></a>00617                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v1,
<a name="l00618"></a>00618                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v2,
<a name="l00619"></a>00619                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v3,
<a name="l00620"></a>00620                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v4,
<a name="l00621"></a>00621                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v5,
<a name="l00622"></a>00622                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v6,
<a name="l00623"></a>00623                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v7,
<a name="l00624"></a>00624                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v8)
<a name="l00625"></a>00625     {
<a name="l00626"></a>00626       std::stringstream s;
<a name="l00627"></a>00627       s &lt;&lt; <span class="keywordtype">object</span> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; method &lt;&lt;<span class="stringliteral">&quot;(&quot;</span>;
<a name="l00628"></a>00628 <span class="preprocessor">#define CHECK(v) if (v.type != DATA_VOID) s &lt;&lt; v &lt;&lt; &quot;,&quot;</span>
<a name="l00629"></a>00629 <span class="preprocessor"></span>      <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v1); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v2); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v3); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v4);
<a name="l00630"></a>00630       <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v5); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v6); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v7); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v8);
<a name="l00631"></a>00631 <span class="preprocessor">#undef CHECK</span>
<a name="l00632"></a>00632 <span class="preprocessor"></span>      std::string r = s.str();
<a name="l00633"></a>00633       <span class="keywordflow">if</span> (v1.<a class="code" href="classurbi_1_1_u_value.html#a0300e8defe31b165b2b00ba190420f09">type</a> != <a class="code" href="namespaceurbi.html#a5443afbb6251a2a6f54cbf3c32e59f3da37930b63d7d14b2efdf1b6eb0e7514d9">DATA_VOID</a>)
<a name="l00634"></a>00634         r = r.substr(0, r.length() - 1);
<a name="l00635"></a>00635       r += <span class="charliteral">&#39;)&#39;</span>;
<a name="l00636"></a>00636       <a class="code" href="uobject_8hh.html#aebc88dc3f91dbf31849e5f45837fcb5b">URBI_SEND_COMMA_COMMAND_C</a>(*<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>, r);
<a name="l00637"></a>00637       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4451d7043d1bd9496d6920b4a10104a0">dataSent</a> = <span class="keyword">true</span>;
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640     <span class="keywordtype">void</span>
<a name="l00641"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aecdf072d5203e40e2fd4bd86655fcac2">00641</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aecdf072d5203e40e2fd4bd86655fcac2">RemoteUContextImpl::declare_event</a>(<span class="keyword">const</span> <a class="code" href="classurbi_1_1_u_event.html" title="UEvent class definition.">UEvent</a>* owner)
<a name="l00642"></a>00642     {
<a name="l00643"></a>00643       <span class="comment">// Event may or may not already exist.</span>
<a name="l00644"></a>00644       std::string r = <span class="stringliteral">&quot;try{var &quot;</span> + owner-&gt;get_name() + <span class="stringliteral">&quot; = Event.new()}&quot;</span>
<a name="l00645"></a>00645       <span class="stringliteral">&quot; catch(var e) {}&quot;</span>;
<a name="l00646"></a>00646       <a class="code" href="uobject_8hh.html#aafc97653a953786ff9a0fe791fb6ba9a" title="Send &amp;quot;\a Args | \n&amp;quot; to C.">URBI_SEND_PIPED_COMMAND_C</a>(*<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>, r);
<a name="l00647"></a>00647       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4451d7043d1bd9496d6920b4a10104a0">dataSent</a> = <span class="keyword">true</span>;
<a name="l00648"></a>00648     }
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     <span class="keywordtype">void</span>
<a name="l00651"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a2dddfe11beb002c4516bc7594a4a521b">00651</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a2dddfe11beb002c4516bc7594a4a521b">RemoteUContextImpl::emit</a>(<span class="keyword">const</span> std::string&amp; <span class="keywordtype">object</span>,
<a name="l00652"></a>00652                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v1,
<a name="l00653"></a>00653                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v2,
<a name="l00654"></a>00654                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v3,
<a name="l00655"></a>00655                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v4,
<a name="l00656"></a>00656                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v5,
<a name="l00657"></a>00657                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v6,
<a name="l00658"></a>00658                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v7,
<a name="l00659"></a>00659                              <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>&amp; v8
<a name="l00660"></a>00660                              )
<a name="l00661"></a>00661     {
<a name="l00662"></a>00662       std::stringstream s;
<a name="l00663"></a>00663       s &lt;&lt; <span class="keywordtype">object</span> &lt;&lt; <span class="stringliteral">&quot;!(&quot;</span>;
<a name="l00664"></a>00664 <span class="preprocessor">#define CHECK(v) if (v.type != DATA_VOID) s &lt;&lt; v &lt;&lt; &quot;,&quot;</span>
<a name="l00665"></a>00665 <span class="preprocessor"></span>      <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v1); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v2); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v3); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v4);
<a name="l00666"></a>00666       <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v5); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v6); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v7); <a class="code" href="uobject_8cc.html#ab2899dbb47ed60e3a21f2b21acc8f60c">CHECK</a>(v8);
<a name="l00667"></a>00667 <span class="preprocessor">#undef CHECK</span>
<a name="l00668"></a>00668 <span class="preprocessor"></span>      std::string r = s.str();
<a name="l00669"></a>00669       <span class="keywordflow">if</span> (v1.<a class="code" href="classurbi_1_1_u_value.html#a0300e8defe31b165b2b00ba190420f09">type</a> != <a class="code" href="namespaceurbi.html#a5443afbb6251a2a6f54cbf3c32e59f3da37930b63d7d14b2efdf1b6eb0e7514d9">DATA_VOID</a>)
<a name="l00670"></a>00670         r = r.substr(0, r.length() - 1);
<a name="l00671"></a>00671       r += <span class="charliteral">&#39;)&#39;</span>;
<a name="l00672"></a>00672       <a class="code" href="uobject_8hh.html#ae2ae93bf93e8afd08ca13cbf6a41b97f" title="Send &amp;quot;\a Args ; \n&amp;quot; to C.">URBI_SEND_COMMAND_C</a>(*<a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a50d9192046395e0b2cc22878b5a252e3">client_</a>, r);
<a name="l00673"></a>00673       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a4451d7043d1bd9496d6920b4a10104a0">dataSent</a> = <span class="keyword">true</span>;
<a name="l00674"></a>00674     }
<a name="l00675"></a>00675 
<a name="l00676"></a>00676     <a class="code" href="classurbi_1_1_u_value.html" title="Container for a value that handles all types known to URBI.">UValue</a>
<a name="l00677"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a6b58f768bb5e647c22b90b188670013d">00677</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a6b58f768bb5e647c22b90b188670013d">RemoteUContextImpl::localCall</a>(<span class="keyword">const</span> std::string&amp; <span class="keywordtype">object</span>,
<a name="l00678"></a>00678                                   <span class="keyword">const</span> std::string&amp; method,
<a name="l00679"></a>00679                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v1,
<a name="l00680"></a>00680                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v2,
<a name="l00681"></a>00681                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v3,
<a name="l00682"></a>00682                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v4,
<a name="l00683"></a>00683                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v5,
<a name="l00684"></a>00684                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v6,
<a name="l00685"></a>00685                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v7,
<a name="l00686"></a>00686                                   <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a> v8)
<a name="l00687"></a>00687     {
<a name="l00688"></a>00688       <a class="code" href="classurbi_1_1_u_auto_value.html" title="UValue with implicit constructors.">UAutoValue</a>* vals[] = {&amp;v1, &amp;v2, &amp;v3, &amp;v4, &amp;v5, &amp;v6, &amp;v7, &amp;v8};
<a name="l00689"></a>00689       <span class="keywordtype">int</span> nargs = 0;
<a name="l00690"></a>00690       <span class="keywordflow">while</span> (nargs&lt;8 &amp;&amp; vals[nargs]-&gt;type != <a class="code" href="namespaceurbi.html#a5443afbb6251a2a6f54cbf3c32e59f3da37930b63d7d14b2efdf1b6eb0e7514d9">DATA_VOID</a>)
<a name="l00691"></a>00691         ++nargs;
<a name="l00692"></a>00692       std::string <a class="code" href="namespaceurbi.html#a6f68a7c74a3236e297c556f08c8e532b">name</a> = <span class="keywordtype">object</span> + <span class="stringliteral">&quot;.&quot;</span> + method +<span class="stringliteral">&quot;__&quot;</span> + string_cast(nargs);
<a name="l00693"></a>00693       <a class="code" href="classurbi_1_1_u_list.html" title="Class storing URBI List type.">UList</a> l;
<a name="l00694"></a>00694       {
<a name="l00695"></a>00695         <span class="comment">// We do not copy the UValues, so do not let the UList destroy them.</span>
<a name="l00696"></a>00696         FINALLY(((<a class="code" href="classurbi_1_1_u_list.html" title="Class storing URBI List type.">UList</a>&amp;, l)), l.<a class="code" href="classurbi_1_1_u_list.html#ab77bae91e75a333d8ad75dc2cb10ad23">array</a>.clear());
<a name="l00697"></a>00697         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;nargs; ++i)
<a name="l00698"></a>00698           l.<a class="code" href="classurbi_1_1_u_list.html#ab77bae91e75a333d8ad75dc2cb10ad23">array</a>.push_back(vals[i]);
<a name="l00699"></a>00699         <a class="code" href="structurbi_1_1_u_table.html#a9746883305270c69811db8b6f7454d75" title="The list call backs.">UTable::callbacks_type</a> tmpfun = functionmap()[name];
<a name="l00700"></a>00700         UTable::callbacks_type::iterator tmpfunit = tmpfun.begin();
<a name="l00701"></a>00701         <span class="keywordflow">if</span> (tmpfunit == tmpfun.end())
<a name="l00702"></a>00702         <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;no callback found for &quot;</span> + <span class="keywordtype">object</span> +<span class="stringliteral">&quot;::&quot;</span>
<a name="l00703"></a>00703                                  + method + <span class="stringliteral">&quot; with &quot;</span> + string_cast(nargs)
<a name="l00704"></a>00704                                  +<span class="stringliteral">&quot; arguments&quot;</span>);
<a name="l00705"></a>00705         <span class="keywordflow">return</span> (*tmpfunit)-&gt;__evalcall(l);
<a name="l00706"></a>00706       }
<a name="l00707"></a>00707     }
<a name="l00708"></a>00708 
<a name="l00709"></a>00709     <a class="code" href="classurbi_1_1impl_1_1_u_var_impl.html">UVarImpl</a>*
<a name="l00710"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab967567330175c6a00781ab0dd17f72a">00710</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ab967567330175c6a00781ab0dd17f72a">RemoteUContextImpl::getVarImpl</a>()
<a name="l00711"></a>00711     {
<a name="l00712"></a>00712       <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_var_impl.html">RemoteUVarImpl</a>();
<a name="l00713"></a>00713     }
<a name="l00714"></a>00714 
<a name="l00715"></a>00715     <a class="code" href="classurbi_1_1impl_1_1_u_object_impl.html">UObjectImpl</a>*
<a name="l00716"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ae6eefb9c625781c68491bff0ef16489c">00716</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#ae6eefb9c625781c68491bff0ef16489c">RemoteUContextImpl::getObjectImpl</a>()
<a name="l00717"></a>00717     {
<a name="l00718"></a>00718       <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_object_impl.html">RemoteUObjectImpl</a>();
<a name="l00719"></a>00719     }
<a name="l00720"></a>00720 
<a name="l00721"></a>00721     <a class="code" href="classurbi_1_1impl_1_1_u_generic_callback_impl.html">UGenericCallbackImpl</a>*
<a name="l00722"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7c0c1cd610b997586aa810bb5d0a8b54">00722</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7c0c1cd610b997586aa810bb5d0a8b54">RemoteUContextImpl::getGenericCallbackImpl</a>()
<a name="l00723"></a>00723     {
<a name="l00724"></a>00724       <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classurbi_1_1impl_1_1_remote_u_generic_callback_impl.html">RemoteUGenericCallbackImpl</a>();
<a name="l00725"></a>00725     }
<a name="l00726"></a>00726 
<a name="l00727"></a>00727     <span class="comment">/*-------------.</span>
<a name="l00728"></a>00728 <span class="comment">    | UObjectHub.  |</span>
<a name="l00729"></a>00729 <span class="comment">    `-------------*/</span>
<a name="l00730"></a>00730 
<a name="l00731"></a>00731     <span class="keywordtype">void</span>
<a name="l00732"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a41e65c10faf7c5b939f34605fc89a358">00732</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a41e65c10faf7c5b939f34605fc89a358">RemoteUContextImpl::setHubUpdate</a>(<a class="code" href="classurbi_1_1_u_object_hub.html" title="Main UObjectHub class definition.">UObjectHub</a>*, ufloat)
<a name="l00733"></a>00733     {
<a name="l00734"></a>00734       <span class="comment">// nothing happend in remote mode...</span>
<a name="l00735"></a>00735     }
<a name="l00736"></a>00736     <span class="keywordtype">void</span>
<a name="l00737"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#adcad58d670202d041031f863ed24b035">00737</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#adcad58d670202d041031f863ed24b035">RemoteUContextImpl::removeHub</a>(<a class="code" href="classurbi_1_1_u_object_hub.html" title="Main UObjectHub class definition.">UObjectHub</a>*)
<a name="l00738"></a>00738     {
<a name="l00739"></a>00739     }
<a name="l00740"></a>00740     <span class="keywordtype">void</span>
<a name="l00741"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7f240525eb99132f1a210962ec723fbd">00741</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a7f240525eb99132f1a210962ec723fbd">RemoteUContextImpl::registerHub</a>(<a class="code" href="classurbi_1_1_u_object_hub.html" title="Main UObjectHub class definition.">UObjectHub</a>*)
<a name="l00742"></a>00742     {
<a name="l00743"></a>00743     }
<a name="l00744"></a>00744 
<a name="l00745"></a>00745     <a class="code" href="namespaceurbi.html#a63f30f52002e7e7f853a12a8c1172f41" title="Return values for the callcack functions.">UCallbackAction</a>
<a name="l00746"></a><a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a2e40fc88477d34671b3a03fee543d18f">00746</a>     <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#a2e40fc88477d34671b3a03fee543d18f">RemoteUContextImpl::clientError</a>(<span class="keyword">const</span> <a class="code" href="classurbi_1_1_u_message.html" title="Class containing all informations related to an URBI message.">UMessage</a>&amp;)
<a name="l00747"></a>00747     {
<a name="l00748"></a>00748       <a class="code" href="classurbi_1_1impl_1_1_remote_u_context_impl.html#aac044d645f96132644d67611438f2702" title="True if we received a clientError message.">closed_</a> = <span class="keyword">true</span>;
<a name="l00749"></a>00749       <span class="comment">/* Destroy everything</span>
<a name="l00750"></a>00750 <span class="comment">       *  We must remove each object from the hash right after deleting it</span>
<a name="l00751"></a>00751 <span class="comment">       * to prevent getUObject requests on deleted items from dtor of other</span>
<a name="l00752"></a>00752 <span class="comment">       * uobjects.</span>
<a name="l00753"></a>00753 <span class="comment">       * Clearing first then deleting might make some UObject fail, since</span>
<a name="l00754"></a>00754 <span class="comment">       * getUObject would return 0 for perfectly valid and accessible UObjects.</span>
<a name="l00755"></a>00755 <span class="comment">       */</span>
<a name="l00756"></a>00756       <span class="keywordflow">while</span> (!<a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.empty())
<a name="l00757"></a>00757       {
<a name="l00758"></a>00758         objects_type::iterator i = <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.begin();
<a name="l00759"></a>00759         <span class="keyword">delete</span> i-&gt;second;
<a name="l00760"></a>00760         <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#ad5319db433207e689493401765068037">objects</a>.erase(i);
<a name="l00761"></a>00761       }
<a name="l00762"></a>00762 
<a name="l00763"></a>00763       <span class="keywordflow">while</span> (!<a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#a4e13d9db6a3d77169a23fbfd6f5b4798">hubs</a>.empty())
<a name="l00764"></a>00764       {
<a name="l00765"></a>00765         hubs_type::iterator i = <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#a4e13d9db6a3d77169a23fbfd6f5b4798">hubs</a>.begin();
<a name="l00766"></a>00766         <span class="keyword">delete</span> i-&gt;second;
<a name="l00767"></a>00767         <a class="code" href="classurbi_1_1impl_1_1_u_context_impl.html#a4e13d9db6a3d77169a23fbfd6f5b4798">hubs</a>.erase(i);
<a name="l00768"></a>00768       }
<a name="l00769"></a>00769       <span class="keywordflow">return</span> URBI_CONTINUE;
<a name="l00770"></a>00770     }
<a name="l00771"></a>00771   } <span class="comment">// namespace urbi::impl</span>
<a name="l00772"></a>00772 
<a name="l00773"></a>00773   <span class="comment">/*</span>
<a name="l00774"></a>00774 <span class="comment">    FIXME: find out where it is used</span>
<a name="l00775"></a>00775 <span class="comment">    std::string</span>
<a name="l00776"></a>00776 <span class="comment">    baseURBIStarter::getFullName(const std::string&amp; name) const</span>
<a name="l00777"></a>00777 <span class="comment">    {</span>
<a name="l00778"></a>00778 <span class="comment">    if (local)</span>
<a name="l00779"></a>00779 <span class="comment">    return name + &quot;_&quot; + getClientConnectionID(client_);</span>
<a name="l00780"></a>00780 <span class="comment">    else</span>
<a name="l00781"></a>00781 <span class="comment">    return name;</span>
<a name="l00782"></a>00782 <span class="comment">    }*/</span>
<a name="l00783"></a>00783 } <span class="comment">// namespace urbi</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
